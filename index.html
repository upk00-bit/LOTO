<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>L√¥ T√¥ 9x9</title>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f5f5f5;
}

table {
  border-collapse: collapse;
  margin: 20px auto;
  border: 4px solid #333;
}

td {
  width: 50px;
  height: 50px;
  border: 2px solid #333;
  font-weight: bold;
  font-size: 18px;
  cursor: pointer;
  background: white;
}

td.empty {
  background: #eee;
  cursor: default;
}

td.marked {
  background: gold;
}
</style>
</head>

<body>

<h2>üé´ T·ªú L√î T√î 9√ó9</h2>

<table id="board"></table>

<script>
/* ================== UTIL ================== */
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

/* ================== GENERATE ONE BOARD ================== */
function generateBoard() {
  let grid = Array.from({ length: 9 }, () => Array(9).fill(null));
  let colCount = Array(9).fill(0);

  // ch·ªçn ƒë√∫ng 5 c·ªôt m·ªói h√†ng
  for (let r = 0; r < 9; r++) {
    let cols = shuffle([0,1,2,3,4,5,6,7,8])
      .filter(c => colCount[c] < 8)
      .slice(0,5);

    cols.forEach(c => {
      grid[r][c] = "X";
      colCount[c]++;
    });
  }

  // pool s·ªë theo c·ªôt
  let pools = [];
  for (let c = 0; c < 9; c++) {
    let min = c === 8 ? 80 : c * 10 + 1;
    let max = c === 8 ? 90 : c * 10 + 9;

    pools[c] = shuffle(
      Array.from({ length: max - min + 1 }, (_, i) => i + min)
    );
  }

  // g√°n s·ªë
  for (let c = 0; c < 9; c++) {
    for (let r = 0; r < 9; r++) {
      if (grid[r][c] === "X") {
        grid[r][c] = pools[c].pop();
      }
    }
  }

  return grid;
}

/* ================== RENDER ================== */
const board = generateBoard();
const table = document.getElementById("board");

board.forEach(row => {
  let tr = document.createElement("tr");

  row.forEach(cell => {
    let td = document.createElement("td");

    if (cell === null) {
      td.className = "empty";
      td.textContent = "";
    } else {
      td.textContent = cell;
      td.onclick = () => td.classList.toggle("marked");
    }

    tr.appendChild(td);
  });

  table.appendChild(tr);
});
</script>

</body>
</html>
