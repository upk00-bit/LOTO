<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Lô Tô 9x9</title>
<style type="text/tailwindcss">
  body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .loto-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 4px;
        }
        .number-cell {
            aspect-ratio: 1/1.2;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            transition: all 0.2s ease;
        }
        .win-row-bg {
            background-color: #fef9c3;
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.3);
        }
        .dark .win-row-bg {
            background-color: #3f3f10;
        }
        @keyframes pulse-green {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            50% { transform: scale(1.02); box-shadow: 0 0 20px 10px rgba(34, 197, 94, 0); }
        }
        .animate-win-button {
            animation: pulse-green 2s infinite;
        }
    </style>
<style>
        body {
            min-height: max(884px, 100dvh);
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>

</head>

<body>

<h2> Chọn Ticket</h2>
<select id="boardSelect"></select>

<table id="board"></table>

<script>
const TOTAL_BOARDS = 20;
const boards = {};
const colors = [
  "#ff9800","#ffc107","#e91e63","#f44336","#4caf50",
  "#2196f3","#795548","#9c27b0","#00bcd4","#8bc34a",
  "#ff5722","#cddc39","#3f51b5","#009688","#607d8b",
  "#673ab7","#ffb74d","#81c784","#64b5f6","#ce93d8"
];

// random số theo cột
function rand(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// tạo 1 tờ hợp lệ
function generateBoard() {
  let board = [];
  let used = new Set();

  for (let r = 0; r < 9; r++) {
    let row = Array(9).fill("");
    let cols = [];

    // chọn đúng 5 cột
    while (cols.length < 5) {
      let c = rand(0, 8);
      if (!cols.includes(c)) cols.push(c);
    }

    cols.forEach(c => {
      let min = c * 10 + 1;
      let max = (c === 8) ? 90 : c * 10 + 9;
      let num;
      do {
        num = rand(min, max);
      } while (used.has(num));
      used.add(num);
      row[c] = num;
    });

    board.push(row);
  }
  return board;
}

// so trùng 2 bảng
function sameBoard(a, b) {
  return JSON.stringify(a) === JSON.stringify(b);
}

// tạo 20 tờ không trùng
for (let i = 1; i <= TOTAL_BOARDS; i++) {
  let b;
  do {
    b = generateBoard();
  } while (Object.values(boards).some(x => sameBoard(x, b)));
  boards[i] = b;
}

// dropdown
const select = document.getElementById("boardSelect");
for (let i = 1; i <= TOTAL_BOARDS; i++) {
  let opt = document.createElement("option");
  opt.value = i;
  opt.text = "Tờ " + i;
  select.appendChild(opt);
}

// hiển thị bảng
function loadBoard(id) {
  const table = document.getElementById("board");
  table.innerHTML = "";
  const color = colors[id - 1];
table.style.borderColor = color;

  boards[id].forEach(row => {
    let tr = document.createElement("tr");
    row.forEach(cell => {
      let td = document.createElement("td");
td.textContent = cell;
td.style.borderColor = color;
td.onclick = () => td.classList.toggle("marked");
      tr.appendChild(td);
    });
    table.appendChild(tr);
  });
}

select.onchange = () => loadBoard(select.value);
loadBoard(1);
</script>

</body>
</html>
