<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>L√¥ t√¥ 20 t·ªù</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  text-align: center;
}

.boards {
  display: grid;
  grid-template-columns: repeat(4, auto);
  gap: 20px;
  justify-content: center;
}

.board {
  border: 4px solid;
  padding: 5px;
  background: white;
}

table {
  border-collapse: collapse;
}

td {
  width: 38px;
  height: 38px;
  border: 1px solid #333;
  text-align: center;
  font-weight: bold;
  cursor: pointer;
}

td.empty {
  background: #eee;
  cursor: default;
}

td.marked {
  background: #ffeb3b;
}
</style>
</head>

<body>

<h1>üé≤ L√î T√î 20 T·ªú üé≤</h1>

<div class="boards" id="boards"></div>

<script>
/* ================= CONFIG ================= */
const COLORS = [
  "#ef4444","#f97316","#eab308","#22c55e","#14b8a6",
  "#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e",
  "#10b981","#0ea5e9","#a855f7","#84cc16","#f59e0b",
  "#dc2626","#16a34a","#9333ea","#0ea5e9","#64748b"
];

const COLUMN_RANGES = [
  [1,9],[10,19],[20,29],[30,39],[40,49],
  [50,59],[60,69],[70,79],[80,90]
];

/* ================= UTIL ================= */
function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

/* ================= GENERATE 1 TICKET ================= */
function generateTicket() {
  // m·ªói c·ªôt 4 ho·∫∑c 5 s·ªë ‚Üí t·ªïng 45
  let colCounts = Array(9).fill(4);
  shuffle([...Array(9).keys()]).slice(0,6).forEach(i => colCounts[i]++);

  const colNumbers = colCounts.map((count, c) => {
    const [min,max] = COLUMN_RANGES[c];
    const nums = [];
    while (nums.length < count) {
      const n = Math.floor(Math.random()*(max-min+1))+min;
      if (!nums.includes(n)) nums.push(n);
    }
    return nums.sort((a,b)=>a-b);
  });

  const grid = Array.from({length:9},()=>Array(9).fill(null));
  const rowCount = Array(9).fill(0);

  colNumbers.forEach((nums,c)=>{
    nums.forEach(num=>{
      const rows = rowCount
        .map((v,i)=>v<5?i:-1)
        .filter(i=>i!==-1);

      const r = rows[Math.floor(Math.random()*rows.length)];
      grid[r][c] = num;
      rowCount[r]++;
    });
  });

  return grid;
}

/* ================= RENDER ================= */
const boardsDiv = document.getElementById("boards");

for (let i = 0; i < 20; i++) {
  const boardData = generateTicket();
  const boardDiv = document.createElement("div");
  boardDiv.className = "board";
  boardDiv.style.borderColor = COLORS[i];

  const table = document.createElement("table");

  boardData.forEach(row=>{
    const tr = document.createElement("tr");
    row.forEach(cell=>{
      const td = document.createElement("td");
      if (cell === null) {
        td.className = "empty";
        td.textContent = "";
      } else {
        td.textContent = cell;
        td.onclick = () => td.classList.toggle("marked");
      }
      tr.appendChild(td);
    });
    table.appendChild(tr);
  });

  boardDiv.appendChild(table);
  boardsDiv.appendChild(boardDiv);
}
</script>

</body>
</html>
