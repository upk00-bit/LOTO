<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Ch·ªçn Ticket L√¥ T√¥</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .ticket-grid {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 4px;
    }
    .cell {
      height: 32px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      background: #e5e7eb;
    }
    .cell.empty {
      background: transparent;
    }
    .ticket {
      border-radius: 14px;
      padding: 10px;
      cursor: pointer;
      transition: 0.2s;
    }
    .ticket:hover {
      transform: scale(1.03);
    }
    .ticket.disabled {
      opacity: 0.35;
      pointer-events: none;
    }
  </style>
</head>

<body class="bg-gray-100 p-6">

<h1 class="text-3xl font-extrabold mb-2 text-center">üéüÔ∏è Ch·ªçn Ticket L√¥ T√¥</h1>
<p class="text-center text-gray-500 mb-6">
  16 t·ªù ‚Ä¢ 8 m√†u ‚Ä¢ B√π tr·ª´ chu·∫©n 1‚Äì90
</p>

<div id="ticketList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 max-w-7xl mx-auto"></div>

<script>
/* =========================
   CONFIG
========================= */

const COLORS = [
  { key: "cam", label: "Cam", bg: "bg-orange-400" },
  { key: "vang", label: "V√†ng", bg: "bg-yellow-300" },
  { key: "hong", label: "H·ªìng", bg: "bg-pink-400" },
  { key: "do", label: "ƒê·ªè", bg: "bg-red-500" },
  { key: "xanhla", label: "Xanh l√°", bg: "bg-green-400" },
  { key: "xanhduong", label: "Xanh d∆∞∆°ng", bg: "bg-blue-400" },
  { key: "nau", label: "N√¢u", bg: "bg-amber-700" },
  { key: "tim", label: "T√≠m", bg: "bg-purple-400" }
];

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

/* =========================
   SINH 2 TICKET B√ô TR·ª™
========================= */

function generatePair(colorKey) {

  // 9 c·ªôt s·ªë chu·∫©n
  const columns = [
    range(1,9),
    range(10,19),
    range(20,29),
    range(30,39),
    range(40,49),
    range(50,59),
    range(60,69),
    range(70,79),
    range(80,90)
  ].map(shuffle);

  const ticketA = createEmptyGrid();
  const ticketB = createEmptyGrid();

  // m·ªói c·ªôt chia ƒë√¥i cho 2 ticket
  columns.forEach((colNums, colIndex) => {
    const half = Math.ceil(colNums.length / 2);
    const aNums = colNums.slice(0, half);
    const bNums = colNums.slice(half);

    distributeColumn(ticketA, colIndex, aNums);
    distributeColumn(ticketB, colIndex, bNums);
  });

  return [
    { id: colorKey + "-A", color: colorKey, grid: ticketA },
    { id: colorKey + "-B", color: colorKey, grid: ticketB }
  ];
}

function range(min, max) {
  return Array.from({ length: max - min + 1 }, (_, i) => min + i);
}

function createEmptyGrid() {
  return Array.from({ length: 9 }, () => Array(9).fill(null));
}

/* ph√¢n s·ªë v√†o c·ªôt, ƒë·∫£m b·∫£o m·ªói h√†ng t·ªëi ƒëa 5 s·ªë */
function distributeColumn(grid, colIndex, nums) {
  const rows = shuffle([...Array(9).keys()]);

  nums.forEach(num => {
    for (let r of rows) {
      const count = grid[r].filter(v => v !== null).length;
      if (count < 5 && grid[r][colIndex] === null) {
        grid[r][colIndex] = num;
        break;
      }
    }
  });
}

/* =========================
   RENDER UI
========================= */

const container = document.getElementById("ticketList");
const selected = new Set();

COLORS.forEach(color => {
  const pair = generatePair(color.key);

  pair.forEach(ticket => {
    const div = document.createElement("div");
    div.className = `ticket ${color.bg} text-black`;

    div.innerHTML = `
      <div class="font-extrabold text-lg mb-1">
        ${color.label} ‚Äì ${ticket.id.slice(-1)}
      </div>
      <div class="ticket-grid bg-white p-2 rounded-lg">
        ${ticket.grid.flat().map(v =>
          v === null
            ? `<div class="cell empty"></div>`
            : `<div class="cell">${v}</div>`
        ).join("")}
      </div>
    `;

    div.onclick = () => {
      if (selected.size >= 1) return;

      selected.add(ticket.id);
      div.classList.add("ring-4","ring-black");

      document.querySelectorAll(".ticket").forEach(t => {
        if (t !== div) t.classList.add("disabled");
      });

      alert("B·∫°n ƒë√£ ch·ªçn ticket: " + ticket.id);
    };

    container.appendChild(div);
  });
});
</script>

</body>
</html>
