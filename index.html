<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>Mời chọn vé</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 20px;
}

.wrapper {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 20px;
}

.ticket {
  background: white;
  padding: 10px;
  border: 2px solid #222;
}

.ticket-title {
  text-align: center;
  font-weight: bold;
  margin-bottom: 6px;
}

.loto-grid {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 3px;
}

.number-cell {
  height: 36px;
  border: 1px solid #999;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.empty {
  background: #eee;
}
</style>
</head>

<body>

<h2>MỜI CHỌN VÉ</h2>
<div class="wrapper" id="wrapper"></div>

<script>
const COLUMN_RANGES = [
  [1, 9], [10, 19], [20, 29], [30, 39], [40, 49],
  [50, 59], [60, 69], [70, 79], [80, 90]
];

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function generateTicket() {
  // 1️⃣ Mỗi cột có 4 hoặc 5 số → tổng = 45
  let colCounts = Array(9).fill(4);
  shuffle([...Array(9).keys()]).slice(0, 6).forEach(i => colCounts[i]++);

  // 2️⃣ Tạo danh sách số cho từng cột
  const colNumbers = colCounts.map((count, col) => {
    const [min, max] = COLUMN_RANGES[col];
    const nums = [];
    while (nums.length < count) {
      const n = Math.floor(Math.random() * (max - min + 1)) + min;
      if (!nums.includes(n)) nums.push(n);
    }
    return nums.sort((a, b) => a - b);
  });

  // 3️⃣ Khởi tạo grid rỗng
  const grid = Array.from({ length: 9 }, () => Array(9).fill(null));
  const rowCounts = Array(9).fill(0);

  // 4️⃣ Phân số vào hàng (mỗi hàng đúng 5)
  colNumbers.forEach((nums, col) => {
    nums.forEach(num => {
      const possibleRows = rowCounts
        .map((c, i) => c < 5 ? i : -1)
        .filter(i => i !== -1);

      const row = possibleRows[Math.floor(Math.random() * possibleRows.length)];
      grid[row][col] = num;
      rowCounts[row]++;
    });
  });

  return grid;
}
</script>

</body>
</html>
