<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>M·ªùi ch·ªçn v√©</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 20px;
}

.wrapper {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 20px;
}

.ticket {
  background: white;
  padding: 10px;
  border: 2px solid #222;
}

.ticket-title {
  text-align: center;
  font-weight: bold;
  margin-bottom: 6px;
}

.loto-grid {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 3px;
}

.number-cell {
  height: 36px;
  border: 1px solid #999;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.empty {
  background: #eee;
}
</style>
</head>

<body>

<h2>üéØ 20 T·ªú L√î T√î</h2>
<div class="wrapper" id="wrapper"></div>

<script>
const COLUMN_RANGES = [
  [1, 9],
  [10, 19],
  [20, 29],
  [30, 39],
  [40, 49],
  [50, 59],
  [60, 69],
  [70, 79],
  [80, 90]
];

function randomFromRange(min, max, used) {
  let n;
  do {
    n = Math.floor(Math.random() * (max - min + 1)) + min;
  } while (used.has(n));
  used.add(n);
  return n;
}

function generateTicket() {
  const usedNumbers = new Set();
  const grid = Array.from({ length: 9 }, () => Array(9).fill(null));

  for (let row = 0; row < 9; row++) {
    const cols = [...Array(9).keys()]
      .sort(() => Math.random() - 0.5)
      .slice(0, 5);

    cols.forEach(col => {
      const [min, max] = COLUMN_RANGES[col];
      grid[row][col] = randomFromRange(min, max, usedNumbers);
    });
  }

  return grid;
}

function ticketHash(grid) {
  return grid.flat().join("-");
}

function renderTicket(grid, index) {
  const ticket = document.createElement("div");
  ticket.className = "ticket";

  ticket.innerHTML = `<div class="ticket-title">T·ªú ${index + 1}</div>`;
  const lotoGrid = document.createElement("div");
  lotoGrid.className = "loto-grid";

  grid.forEach(row => {
    row.forEach(cell => {
      const div = document.createElement("div");
      div.className = "number-cell";
      if (cell === null) {
        div.classList.add("empty");
        div.textContent = "";
      } else {
        div.textContent = cell.toString().padStart(2, "0");
      }
      lotoGrid.appendChild(div);
    });
  });

  ticket.appendChild(lotoGrid);
  return ticket;
}

const wrapper = document.getElementById("wrapper");
const hashes = new Set();
let count = 0;

while (count < 20) {
  const ticket = generateTicket();
  const hash = ticketHash(ticket);

  if (!hashes.has(hash)) {
    hashes.add(hash);
    wrapper.appendChild(renderTicket(ticket, count));
    count++;
  }
}
</script>

</body>
</html>
